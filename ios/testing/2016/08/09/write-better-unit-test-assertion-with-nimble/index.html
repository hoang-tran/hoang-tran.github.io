<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Write better unit test assertions with Nimble &#8211; Hoang Tran - Leadership & Management Coach</title>
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdn.mathjax.org">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="
	Learn how to write better unit test assertions in iOS with the help of Nimble
">
    <meta name="robots" content="all">
    <meta name="author" content="">
    <meta name="keywords" content="ios, testing">
    <link rel="canonical" href="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Hoang Tran" href="/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/pixyll.css?202008151502" type="text/css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    
      <script src="https://use.fontawesome.com/2982768df5.js"></script>
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    
      <meta name="google-site-verification" content="rXDWxoQCkROwuzF0Ie1e_pN7zjBJjOx9ZIcdnMF7HmM" />
    
    
      <meta name="msvalidate.01" content="78D007F72A205107B4315B6F41D46C0F" />
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Write better unit test assertions with Nimble">
    <meta property="og:description" content="
	Learn how to write better unit test assertions in iOS with the help of Nimble
">
    <meta property="og:url" content="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/
">
    <meta property="og:site_name" content="Hoang Tran">
    <meta property="og:image" content="">
    <meta property="fb:app_id" content="1001202813330058" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    
        <meta name="twitter:site" content="@_hoangtran" />
    
    <meta name="twitter:title" content="Write better unit test assertions with Nimble" />
    <meta name="twitter:description" content="
	Learn how to write better unit test assertions in iOS with the help of Nimble
" />
    <meta name="twitter:url" content="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/
" />
    <meta name="twitter:image" content="" />

    <!-- Icons -->
 <!--    <link rel="apple-touch-icon" sizes="57x57" href="/images/icon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icon/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icon/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icon/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/images/icon/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/images/icon/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/images/icon/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/images/icon/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/images/icon/favicon-32x32.png" sizes="32x32"> -->

    
    <script type="text/javascript">
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
       ga('create', 'UA-81196779-1', 'auto');
       ga('send', 'pageview');
    </script>
    
</head>

<body class="site">
  
  
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2&appId=1001202813330058&autoLogAppEvents=1";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));</script>


  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="http://hoangtran.me/" class="site-title">Hoang Tran</a>
      <nav class="site-nav">
        <!-- <a href="http://hoangtran.me/">Home</a>
<a href="http://hoangtran.me/blog">Blog</a>
 -->
      </nav>
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        <div class="post-header mb2">
  <h1>Write better unit test assertions with Nimble</h1>
  <span class="post-meta">
09 August 2016
  
</div>

<article class="post-content">
  <p>Normally, when we write unit tests in iOS, we usually use the <code class="language-plaintext highlighter-rouge">XCTAssert</code> method to describe our expectation for the test. The syntax is very simple.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kt">XCTAssert</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>

<span class="kt">XCTAssertFalse</span><span class="p">(</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span>

<span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span> <span class="s">"hello"</span><span class="p">)</span></code></pre></figure>

<p>However, when these tests fail, we have no idea <strong>why</strong>.</p>

<p>Xcode only shows us <code class="language-plaintext highlighter-rouge">XCTAssertTrue failed</code> or <code class="language-plaintext highlighter-rouge">XCTAssertFalse failed</code> without any explanation.</p>

<p><img src="/images/write-better-unit-test-assertions-with-nimble/xctassert-fail.png" alt="" /></p>

<p>Of course we can add a custom error message like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kt">XCTAssert</span><span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"your custom error message here"</span><span class="p">)</span></code></pre></figure>

<p>But this seems like an overkill.</p>

<p>Who’s gonna write error messages for every assertions? It’s gonna take ages.</p>

<p>Why don’t we just focus on writing whatever we expect and stop worrying about error messsages?</p>

<h2 id="thats-where-nimble-comes-to-the-rescue">That’s where Nimble comes to the rescue</h2>

<p>With <a href="https://github.com/Quick/Nimble">Nimble</a>, you can write your expectation just like plain English:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nf">expect</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="c1">// or shorter version</span>
<span class="nf">expect</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

<span class="nf">expect</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">beGreaterThan</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">// or</span>
<span class="nf">expect</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>

<span class="nf">expect</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span><span class="o">.</span><span class="nf">notTo</span><span class="p">(</span><span class="nf">equal</span><span class="p">(</span><span class="s">"holla"</span><span class="p">))</span>
<span class="c1">// or</span>
<span class="nf">expect</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span><span class="o">.</span><span class="nf">toNot</span><span class="p">(</span><span class="nf">equal</span><span class="p">(</span><span class="s">"holla"</span><span class="p">))</span>
<span class="c1">// or</span>
<span class="nf">expect</span><span class="p">(</span><span class="s">"hello"</span><span class="p">)</span> <span class="o">!=</span> <span class="s">"holla"</span></code></pre></figure>

<p>And when something fails, it shows exactly what went wrong:</p>

<p><img src="/images/write-better-unit-test-assertions-with-nimble/nimble-fail.png" alt="" /></p>

<p>If that is not clear enough (really?), you can still add your own error message:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="nf">expect</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nv">description</span><span class="p">:</span> <span class="s">"your custom error message here"</span><span class="p">)</span></code></pre></figure>

<p>There are a whole lot of useful Nimble methods that you can use to better desribe your expectation:</p>

<ul>
  <li>Type/Classes</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// Passes if instance is an instance of aClass</span>
<span class="nf">expect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">beAnInstanceOf</span><span class="p">(</span><span class="n">aClass</span><span class="p">))</span>

<span class="c1">// Passes if instance is an instance of aClass or any of its subclasses</span>
<span class="nf">expect</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">beAKindOf</span><span class="p">(</span><span class="n">aClass</span><span class="p">))</span></code></pre></figure>

<ul>
  <li>Collections</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// expect collection contains element(s)</span>
<span class="nf">expect</span><span class="p">([</span><span class="s">"dog"</span><span class="p">,</span> <span class="s">"cat"</span><span class="p">,</span> <span class="s">"monkey"</span><span class="p">])</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">contain</span><span class="p">(</span><span class="s">"monkey"</span><span class="p">,</span> <span class="s">"dog"</span><span class="p">))</span>

<span class="c1">// expect empty collection</span>
<span class="nf">expect</span><span class="p">([])</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">beEmpty</span><span class="p">())</span>

<span class="c1">// expect collection elements count</span>
<span class="nf">expect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">haveCount</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span></code></pre></figure>

<ul>
  <li>Strings</li>
</ul>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// expect string contains substring</span>
<span class="nf">expect</span><span class="p">(</span><span class="s">"how are you"</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">contain</span><span class="p">(</span><span class="s">"are"</span><span class="p">))</span>

<span class="c1">// expect string begins with substring</span>
<span class="nf">expect</span><span class="p">(</span><span class="s">"how are you"</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">beginWith</span><span class="p">(</span><span class="s">"how"</span><span class="p">))</span>

<span class="c1">// expect string ends with substring</span>
<span class="nf">expect</span><span class="p">(</span><span class="s">"how are you"</span><span class="p">)</span><span class="o">.</span><span class="nf">to</span><span class="p">(</span><span class="nf">endWith</span><span class="p">(</span><span class="s">"you"</span><span class="p">))</span></code></pre></figure>

<p>And so much more…</p>

<p>All available methods can be found on the <a href="https://github.com/Quick/Nimble">Nimble’s documentation</a>. There’s a section dedicated for <a href="https://github.com/Quick/Nimble#asynchronous-expectations">Asynchronous Expectations</a> which is extremely useful when you want to write tests for network requests. Please read if you want to fully utilize Nimble’s power.</p>

<h2 id="so-how-do-we-install-nimble">So how do we install Nimble?</h2>

<p>Just like any other pod, all you need to do is adding one single line <code class="language-plaintext highlighter-rouge">pod 'Nimble'</code> to your Podfile. Note that since we only use Nimble for testing purpose, we want to add it to the test target only.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'9.0'</span>

<span class="c1"># please replace `MyAwesomeProject` with your real project name</span>
<span class="n">target</span> <span class="s1">'MyAwesomeProject'</span> <span class="k">do</span>
  <span class="n">use_frameworks!</span>

  <span class="n">target</span> <span class="s1">'MyAwesomeProjectTests'</span> <span class="k">do</span>
    <span class="n">inherit!</span> <span class="ss">:search_paths</span>
    <span class="n">pod</span> <span class="s1">'Nimble'</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p>Finally open <code class="language-plaintext highlighter-rouge">Terminal</code> and type:</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh">pod <span class="nb">install</span></code></pre></figure>

<p>If you don’t know how to setup <code class="language-plaintext highlighter-rouge">cocoapods</code> properly, you can read this <a href="/ios/testing/2016/07/24/how-to-setup-testing-for-new-ios-project/#step-2-setup-cocoapods">post</a> for detailed steps.</p>

<h2 id="wrap-up">Wrap up</h2>

<p>In this post, we discussed about some of <code class="language-plaintext highlighter-rouge">XCTAssert</code>’s shortcomings and how <code class="language-plaintext highlighter-rouge">Nimble</code> can fill that gap.</p>

<p><code class="language-plaintext highlighter-rouge">Nimble</code> also provides an expressive way of writing your expectation so that it reads just like plain English. I highly recommend <code class="language-plaintext highlighter-rouge">Nimble</code> to anyone who is learning to write unit tests and want to write them beautifully.</p>

</article>




<div class="fb-like" data-href="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/
" data-width="320" data-layout="standard" data-action="like" data-size="large" data-show-faces="true" data-share="true"></div>

	<!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; }
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://hoangtran.us1.list-manage.com/subscribe/post?u=5365241c266315ff943db64c7&amp;id=0a26c79af4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2>Subscribe to my blog</h2>
	<p>If you think this blog is useful, please subscribe to get notifications on my new posts.</p>
<div class="mc-field-group">
	<label for="mce-FNAME">Name </label>
	<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
</div>
<div class="mc-field-group">
	<label for="mce-EMAIL">Email Address </label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_5365241c266315ff943db64c7_0a26c79af4" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[1]='FNAME';ftypes[1]='text';fnames[0]='EMAIL';ftypes[0]='email';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->



  <div class="fb-comments" data-href="http://hoangtran.me/ios/testing/2016/08/09/write-better-unit-test-assertion-with-nimble/
" data-width="100%" data-numposts="10"></div>



  <h3 class="related-post-title">Related posts</h3>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
    </div>
  
    <div class="post ml2">
      
        <a href="/ios/testing/2016/08/07/how-to-write-unit-tests-in-ios-p2-behavior-driven-development-bdd/" class="post-link">
          <h4 class="post-title">How to write unit tests in iOS Part 2: Behavior-driven Development (BDD)</h4>
        </a>
      
    </div>
  
    <div class="post ml2">
      
        <a href="/ios/testing/2016/07/31/how-to-write-unit-tests-in-ios-p1-xctestcase/" class="post-link">
          <h4 class="post-title">How to write unit tests in iOS Part 1: XCTestCase</h4>
        </a>
      
    </div>
  
    <div class="post ml2">
      
        <a href="/ios/testing/2016/07/24/how-to-setup-testing-for-new-ios-project/" class="post-link">
          <h4 class="post-title">How to setup testing for new iOS project</h4>
        </a>
      
    </div>
  


      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    
      <div class="social-icons">
  <!--  -->
  <!-- <a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/1608859"></a> -->
  <!--  -->
  <!-- 
  <a class="fa fa-facebook" href="https://www.facebook.com/hoangtx.master"></a>
   -->
  <!-- 
  <a class="fa fa-github" href="https://github.com/hoang-tran"></a>
   -->
  <!--  -->
  
  <a class="fa fa-linkedin" href="https://www.linkedin.com/in/hoangxtran"></a>
  
  
  <a class="fa fa-twitter" href="https://twitter.com/_hoangtran"></a>
  
  
  <a class="fa fa-envelope" href="mailto:hoang@hoangtran.me"></a>
  
  <!--  -->
  <!--  -->
  <!--  -->
  <!--  -->
  <!--  -->
  <!-- <a class="fa fa-rss" href="/feed.xml"></a> -->
  <!-- <div class="right">
    
    
    
  </div> -->
</div>
<div class="clearfix"></div>

    
  </div>
</footer>


</body>
</html>
